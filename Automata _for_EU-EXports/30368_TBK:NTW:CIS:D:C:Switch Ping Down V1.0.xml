<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<automatonExport>
    <automaton>
        <approvalNotes>Date: 22June2016&#xD;
Devops: https://hub.jazz.net/ccm06/resource/itemName/com.ibm.team.workitem.WorkItem/33121&#xD;
&#xD;
Radar Links:&#xD;
Flow 1- https://ipctrprodmel.ipctrmel02.com/IPradar/update.htm?ticketID=118850&#xD;
Flow 2- https://ipctrprodmel.ipctrmel02.com/IPradar/update.htm?ticketID=120383</approvalNotes>
        <approvalStatus>APPROVED</approvalStatus>
        <automaticDelaySeconds>60</automaticDelaySeconds>
        <created>2016-06-10T07:48:40Z</created>
        <Category>
            <categoryID>1287</categoryID>
            <clientID>33</clientID>
            <name>Diagnosis</name>
            <parent>
                <categoryID>1285</categoryID>
                <clientID>33</clientID>
                <name>Components</name>
                <parent>
                    <categoryID>377</categoryID>
                    <clientID>33</clientID>
                    <name>Network Management</name>
                </parent>
            </parent>
        </Category>
        <automatonID>30368</automatonID>
        <executionMode>MANUAL</executionMode>
        <isLive>true</isLive>
        <isMasterTicketOnly>true</isMasterTicketOnly>
        <matchType>AND</matchType>
        <modified>2016-06-22T06:32:06Z</modified>
        <name>TBK:NTW:CIS:D:C:Switch Ping Down V1.0</name>
        <purpose>DIAGNOSIS</purpose>
        <newExecutionThrottleCount>0</newExecutionThrottleCount>
        <newExecutionThrottlePeriodSeconds>0</newExecutionThrottlePeriodSeconds>
        <engineerTimeToDiagnose>0</engineerTimeToDiagnose>
        <engineerTimeToRemediate>0</engineerTimeToRemediate>
        <ConstantVariables>
            <ConstantVariable>
                <automatonID>30368</automatonID>
                <name>devicehostname</name>
                <secure>false</secure>
                <variableID>328716</variableID>
                <value>&lt;![CDATA[tbd]]&gt;</value>
            </ConstantVariable>
            <ConstantVariable>
                <automatonID>30368</automatonID>
                <name>component_output</name>
                <secure>false</secure>
                <variableID>328718</variableID>
                <value>&lt;![CDATA[tbd]]&gt;</value>
            </ConstantVariable>
        </ConstantVariables>
        <FormVariables/>
        <RegexExtractVariables>
            <RegexExtractVariable>
                <automatonID>30368</automatonID>
                <name>affected_host</name>
                <secure>false</secure>
                <variableID>328717</variableID>
                <actionID>441681</actionID>
                <field>OUT</field>
            </RegexExtractVariable>
        </RegexExtractVariables>
        <RuntimeVariables/>
        <ScriptExtractVariables/>
        <Connections>
            <Connection>
                <name>affected_host</name>
                <connectionClientCode>tbk</connectionClientCode>
                <connectionProtocol>SSH</connectionProtocol>
                <connectionHost>198.18.125.34</connectionHost>
                <backupConnectionClientCode>tbk</backupConnectionClientCode>
                <backupConnectionHost>198.18.125.35</backupConnectionHost>
                <backupConnectionProtocol>SSH</backupConnectionProtocol>
            </Connection>
        </Connections>
        <CMDBAssociateActions/>
        <CMDBQueryActions>
            <CMDBQueryAction>
                <actionID>441685</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535368</stateID>
                <ciName>${devicehostname}.tbk</ciName>
                <queryActionType>ATTRIBUTE</queryActionType>
                <queryString>/Status</queryString>
            </CMDBQueryAction>
            <CMDBQueryAction>
                <actionID>441681</actionID>
                <RegexExtractVariableIDs>
                    <RegexExtractVariableID>328717</RegexExtractVariableID>
                </RegexExtractVariableIDs>
                <ScriptExtractVariableIDs/>
                <stateID>535372</stateID>
                <ciName>${devicehostname}.tbk</ciName>
                <queryActionType>ATTRIBUTE</queryActionType>
                <queryString>/Monitored Address</queryString>
            </CMDBQueryAction>
        </CMDBQueryActions>
        <EditVariableActions>
            <EditVariableAction>
                <actionID>441684</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535376</stateID>
                <refresh>false</refresh>
                <script>component_output="Success-Obtained the Router details from the cmdb to check the connectivity.\n";
component_output+="Proceeding with the Router Ping down check automation.\n"
component_output;</script>
                <EditVariableTransforms/>
                <variableID>328718</variableID>
            </EditVariableAction>
            <EditVariableAction>
                <actionID>441682</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535375</stateID>
                <refresh>false</refresh>
                <script>component_output="Situation - Unable to find the router information for the switch that is down in IPCMDB.\n";
component_output+="Request for manual intervention.\n";
component_output;</script>
                <EditVariableTransforms/>
                <variableID>328718</variableID>
            </EditVariableAction>
            <EditVariableAction>
                <actionID>441680</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535369</stateID>
                <refresh>false</refresh>
                <EditVariableTransforms>
                    <EditVariableTransform>
                        <arguments>
                            <entries>
<transformMethodArgumentID>89</transformMethodArgumentID>
<transformMethodID>50</transformMethodID>
<transformMethodArgumentValue>&lt;![CDATA[r]]&gt;</transformMethodArgumentValue>
                            </entries>
                            <entries>
<transformMethodArgumentID>88</transformMethodArgumentID>
<transformMethodID>50</transformMethodID>
<transformMethodArgumentValue>&lt;![CDATA[sw]]&gt;</transformMethodArgumentValue>
                            </entries>
                        </arguments>
                        <transformMethodID>50</transformMethodID>
                    </EditVariableTransform>
                </EditVariableTransforms>
                <variableID>328716</variableID>
            </EditVariableAction>
            <EditVariableAction>
                <actionID>441683</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535373</stateID>
                <refresh>false</refresh>
                <script>component_output="Situation - Corresponding Router details not found in cmdb.\n";
component_output+="Require manual intervention.\n";
component_output;</script>
                <EditVariableTransforms/>
                <variableID>328718</variableID>
            </EditVariableAction>
        </EditVariableActions>
        <EmailActions>
            <EmailAction>
                <actionID>441679</actionID>
                <RegexExtractVariableIDs/>
                <ScriptExtractVariableIDs/>
                <stateID>535371</stateID>
                <body>${component_output}</body>
                <from>@</from>
                <subject>@</subject>
                <to>@</to>
            </EmailAction>
        </EmailActions>
        <FormActions/>
        <HostCommandActions/>
        <LinkActions/>
        <LockTicketActions/>
        <RfcActions/>
        <ScriptActions/>
        <WaitForRecoveryIPmonActions/>
        <GenericTicketEventWaitActions/>
        <AckProblemIPmonActions/>
        <CancelDowntimeIPmonActions/>
        <ExecuteCheckIPmonActions/>
        <ScheduleDowntimeIPmonActions/>
        <PhoneCallActions/>
        <TimedWaitActions/>
        <UpdateTicketActions/>
        <SubmitPassiveIPmonActionDetails/>
        <HttpRequestActions/>
        <IPdiscoverActions/>
        <ExecuteIPadminActions/>
        <SQLCommandActions/>
        <NotifyActions/>
        <ForkStates/>
        <FormStates/>
        <JoinStates/>
        <LinkStates/>
        <NoopStates>
            <NoopState>
                <name>Begin</name>
                <originalID>511867</originalID>
                <stateID>535370</stateID>
                <XPos>311</XPos>
                <YPos>119</YPos>
            </NoopState>
        </NoopStates>
        <NormalStates>
            <NormalState>
                <actionID>441685</actionID>
                <name>IPcmdb - Query CIs - pull device existence and status</name>
                <originalID>511865</originalID>
                <stateID>535368</stateID>
                <XPos>311</XPos>
                <YPos>346</YPos>
            </NormalState>
            <NormalState>
                <actionID>441684</actionID>
                <name>edit success compout</name>
                <originalID>511870</originalID>
                <stateID>535376</stateID>
                <XPos>310</XPos>
                <YPos>555</YPos>
            </NormalState>
            <NormalState>
                <actionID>441682</actionID>
                <name>set compout - aligned router not found</name>
                <originalID>511864</originalID>
                <stateID>535375</stateID>
                <XPos>607</XPos>
                <YPos>346</YPos>
            </NormalState>
            <NormalState>
                <actionID>441681</actionID>
                <name>IPcmdb - Query CIs - pull IP address</name>
                <originalID>511869</originalID>
                <stateID>535372</stateID>
                <XPos>311</XPos>
                <YPos>446</YPos>
            </NormalState>
            <NormalState>
                <actionID>441679</actionID>
                <name>Declare Variables</name>
                <originalID>511868</originalID>
                <stateID>535371</stateID>
                <XPos>131</XPos>
                <YPos>120</YPos>
            </NormalState>
            <NormalState>
                <actionID>441680</actionID>
                <name>replace sw to r in var</name>
                <originalID>511866</originalID>
                <stateID>535369</stateID>
                <XPos>310</XPos>
                <YPos>241</YPos>
            </NormalState>
            <NormalState>
                <actionID>441683</actionID>
                <name>set compout - respective router IP not found in cmdb</name>
                <originalID>511872</originalID>
                <stateID>535373</stateID>
                <XPos>589</XPos>
                <YPos>446</YPos>
            </NormalState>
        </NormalStates>
        <SuccessStates>
            <SuccessState>
                <name>Success</name>
                <originalID>511873</originalID>
                <stateID>535374</stateID>
                <XPos>775</XPos>
                <YPos>416</YPos>
            </SuccessState>
            <SuccessState>
                <name>Going to check Router ping down for respective switch</name>
                <originalID>511871</originalID>
                <stateID>535377</stateID>
                <XPos>565</XPos>
                <YPos>555</YPos>
            </SuccessState>
        </SuccessStates>
        <WaitStates/>
        <Transitions>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>0</expression>
                    <negate>false</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>332,555:342,555:437,555:437,555:533,555:543,555</connectorLayout>
                <fromStateID>535376</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>ok</name>
                <toStateID>535377</toStateID>
                <transitionID>601773</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>0</expression>
                    <negate>false</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>629,346:639,346:691,346:691,416:743,416:753,416</connectorLayout>
                <fromStateID>535375</fromStateID>
                <labelLayout>2:0:2:70</labelLayout>
                <name>ok</name>
                <toStateID>535374</toStateID>
                <transitionID>601770</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>0</expression>
                    <negate>false</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>310,257:310,267:311,267:311,267:311,321:311,331</connectorLayout>
                <fromStateID>535369</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>ok</name>
                <toStateID>535368</toStateID>
                <transitionID>601768</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>false</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>(?i)Active</expression>
                    <negate>false</negate>
                    <outputField>OUT</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>311,362:311,372:311,372:311,372:311,421:311,431</connectorLayout>
                <fromStateID>535368</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>ok</name>
                <toStateID>535372</toStateID>
                <transitionID>601775</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>ALWAYS</evaluatorType>
                    <negate>true</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>289,119:279,119:275,119:275,120:164,120:154,120</connectorLayout>
                <fromStateID>535370</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>never</name>
                <toStateID>535371</toStateID>
                <transitionID>601766</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>false</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>(?i)Active</expression>
                    <negate>true</negate>
                    <outputField>OUT</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>333,346:343,346:343,346:343,346:575,346:585,346</connectorLayout>
                <fromStateID>535368</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>not ok</name>
                <toStateID>535375</toStateID>
                <transitionID>601769</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>false</completeMatch>
                    <evaluatorType>VARIABLE</evaluatorType>
                    <expression>(\d+\.\d+\.\d+\.\d+)</expression>
                    <negate>false</negate>
                    <variableID>328717</variableID>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>311,462:311,472:310,472:310,472:310,530:310,540</connectorLayout>
                <fromStateID>535372</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>ok</name>
                <toStateID>535376</toStateID>
                <transitionID>601774</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>false</completeMatch>
                    <evaluatorType>VARIABLE</evaluatorType>
                    <expression>(\d+\.\d+\.\d+\.\d+)</expression>
                    <negate>true</negate>
                    <variableID>328717</variableID>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>333,446:343,446:343,446:343,446:557,446:567,446</connectorLayout>
                <fromStateID>535372</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>could not pull ip</name>
                <toStateID>535373</toStateID>
                <transitionID>601772</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>ALWAYS</evaluatorType>
                    <negate>false</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>311,135:311,145:310,145:310,145:310,216:310,226</connectorLayout>
                <fromStateID>535370</fromStateID>
                <labelLayout>0:0:3:50</labelLayout>
                <name>go</name>
                <toStateID>535369</toStateID>
                <transitionID>601767</transitionID>
            </Transition>
            <Transition>
                <transitionEvaluator>
                    <completeMatch>true</completeMatch>
                    <evaluatorType>OUTPUT</evaluatorType>
                    <expression>0</expression>
                    <negate>false</negate>
                    <outputField>RET</outputField>
                    <weight>1</weight>
                </transitionEvaluator>
                <connectorLayout>611,446:621,446:682,446:682,416:743,416:753,416</connectorLayout>
                <fromStateID>535373</fromStateID>
                <labelLayout>0:0:1:61</labelLayout>
                <name>ok</name>
                <toStateID>535374</toStateID>
                <transitionID>601771</transitionID>
            </Transition>
        </Transitions>
        <TicketMatchers/>
        <Tags/>
    </automaton>
    <timeOfExport>2017-06-28T07:39:09.608Z</timeOfExport>
</automatonExport>
